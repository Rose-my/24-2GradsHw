<!-- Template for PROJECT REPORT of CapstoneDesign 2024-2H, initially written by khyoo -->
<!-- 본 파일은 2024년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | **Multimodal LLM을 통해 학교 내 분실물을 쉽고 효율적으로 등록, 관리, 찾을 수 있는 웹서비스**
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 09-보성말차 |
| (3) 팀 구성원 | 이서영(2029028) : 리더, *AI* <br> 김민영 (2073028): 팀원, *FE* <br> 이정은 (2128020) : 팀원, *BE*			 |
| (4) 팀 지도교수 | 오세은 교수님 |
| (5) 팀 멘토 | 정아연 / 개발자 / 라인플러스 |
| (6) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | 분실물 검색, LLM, NLP, Web  |
| (7) 과제 내용 요약 | **1. 한줄소개** <br> C.LOVA(클로바)는 ChatGPT 4.o를 통해 **분실물**을 쉽고 효율적으로 **등록**하고 **검색**할 수 있는 웹서비스입니다. <br><br> **2. Painpoint** <br> 저희는 현재 **이화여대 학생서비스센터**에서 제공하는 분실물 게시판은 내용이 방대하고, 검색 기능이 제대로 작동하지 않으며 등록과정이 번거롭다는 **불편함**을 발견하고 이러한 프로젝트를 고안하게 되었습니다. <br><br> **3. 타겟 유저** <br> 저희 서비스의 타겟 유저는 다음과 같이 2부류가 있습니다. <br><ol> **1. 분실물 검색유저** : 물건을 찾으려는 사람이 자신의 잃어버린 물건에 대한 설명을 **프롬프트로 제시**하면 해당 설명과 DB 내 키워드들의 **유사도 검사**를 통해 유력한 분실물을 필터링하여 제공합니다. <br> **2. 습득물 등록자** : 분실물을 획득한 사람이 **이미지를 등록**하면 **ChatGPT 4.o**가 물건이 가지고 있는 시각적 특징을 텍스트로 생성하고, 그 중 중요 키워드(모양, 재질, 색, 텍스트 유무 등)를 활용하여 분실물 데이터베이스를 객관적이고 효율적으로 구축합니다. </ol> **4. 기대효과** <br> C.LOVA(클로바)는 분실물을 제대로 관리하고 찾기 힘들다는 pain point를 개선한 서비스로서, 분실물을 **발견한 사람**과 **찾는 사람** 모두 쉽고 간편하게 이용할 수 있다는 기대효과가 있습니다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | 교내에서 하루에 다섯 건 이상의 분실물이 발생하지만, **이화여대 학생서비스센터 분실물 게시판**은 물건에 대한 카테고리나 상세 정보를 제공하지 않아 <br> **(1) 분실물을 찾으려면** 모든 게시물을 하나하나 확인해야 하는 불편함이 존재합니다. <br> **(2) 분실물을 등록할 때마다** 모든 항목을 일일이 채워야 하므로 등록 과정 자체가 번거롭고, 이로 인해 원활한 분실물 찾기 과정이 어려운 상황입니다. <br><br> 따라서, 저희는 이러한 pain point를 인지했고, 학생들이 **자신이 찾는 물건에 대해 빠르고 정확하게 접근**할 수 있으며, **등록 과정 또한 간소화**하여 효율적으로 운영하는 `C.LOVA(클로바)`를 제안합니다. |
| (2) 기존연구와의 비교 | **1. 복잡한 검색 기능 해소** <br><br><img width="700" alt="검색 비교" src="https://github.com/user-attachments/assets/03b7dbb6-62a7-4e65-b468-2c2915be2b81"><br><br>**2. 불편한 등록 과정 간소화**<br><br> <img width="700" alt="등록 비교" src="https://github.com/user-attachments/assets/e6a875f6-1359-482b-a50e-e77b77724454"> |
| (3) 제안 내용 | **1. 복잡한 검색 기능 해소** <br> 사용자가 분실물의 정보를 자신의 언어로 풀어쓸 수 있도록 **(1) 프롬프트 형태**로 입력 받고 사용자가 찾는 물건과 기존 등록된 분실물들을 비교하는 과정을 **(2) 유사도 계산**을 통해 구현하여 물건을 찾는 과정을 자동화했습니다. <br><br> **2. 불편한 등록 과정 간소화** <br> 간편하게 물건 등록을 위해서 multimodal LLM(ChatGPT 4.o)을 사용하여 **습득물 사진을 등록하기만 하면** multimodal LLM(ChatGPT 4.o)가 이미지에서 가시적인 정보를 추출하여 자동으로 습득물 정보를 입력해주는 아이디어를 고안하였습니다. |
| (4) 기대효과 및 의의 | **(2: 기존연구와의 비교)** 에서 언급했듯이, 현재 교내 분실물 게시판은 등록과 검색 모두 비효율적인 상태로 저희 서비스가 도입된다면 기대할 수 있는 효과를 2가지 측면으로 나눌 수 있습니다. <ol>**1. 분실물 검색 최적화** : 저희 서비스를 통해 학생들은 분실물 검색 기능이 개선되어 물건을 보다 쉽게 찾을 수 있고, 분산된 정보도 한 곳에서 통합적으로 관리되므로, 검색 시간과 노력이 절감됩니다. </ol><ol>**2. 습득물 등록 간편화** : 또한, 학생서비스센터에서는 매일 유레카 포탈 사이트에 분실물을 등록하는데, 저희 서비스는 자동화된 분류 및 등록 절차를 도입하여 등록자가 모든 항목을 수동으로 채울 필요 없이 업무 강도를 줄이고, 효율적인 분실물 관리가 가능해질 것입니다.</ol> |
| (5) 주요 기능 리스트 | **[ 분실물 검색 ]** <br> 사용자가 분실물을 설명하는 프롬프트를 입력하면 유사한 분실물을 매칭하여 보여줍니다. 이는 TF-IDF 유사도 모델로 구현합니다.<br> 1. 찾고 싶은 물건을 설명할 수 있는 프롬프트 입력 <br> 2. 분실 장소 입력 최적화 <br> 3. 프롬프트와의 유사도 계산 후 사용자의 물건일 가능성이 높은 상위 5개 물건 제시 (계산 고도화를 위해 nltk 등의 자연어 처리 패키지들을 사용하여 불용어 제거, 토큰화, 추가 특징 정보 추가 등의 전처리를 수행)<br><br> **[ 습득물 등록 ]** <br> 습득물 사진을 등록하기만 하면 이미지 설명 API로 습득물이 자동등록 됩니다. 이는 chat gpt 4-o 모델로 구현합니다. <br> 1. 습득물 이미지 업로드 <br> 2. chat gpt 4-o 모델이 로고, 색깔, 재질, 텍스트 등 가시적인 물품의 특징 정보를 텍스트로 추출 <br> 3. 습득장소, 보관장소 입력 최적화 <br> 4. 사용자가 자동 입력된 정보 바로 수정 가능 (모델 오작동 방지) |

<br>

# Project-Design
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | ![요구사항 피드백반영 drawio](https://github.com/user-attachments/assets/0feebfa7-025f-4647-9e0e-fb6965272dd3)|
| (2) 전체 시스템 구성 |**[ 시스템 아키텍쳐 구조도 ]** <br><br> ![아키텍처 구조도](https://github.com/user-attachments/assets/4c5ca1a4-1b41-4659-a8d9-a3a2390f6221) <br><br> **[ 분실물 검색 ]** <br><br> 1) 프롬프트 작성 <br> <li>사용자는 잃어버린 물건에 대해 친구에게 설명하듯이 물건 정보를 프롬프트로 작성합니다. 이후 **POST 요청**으로 서버에 텍스트를 전송합니다. <br> 예시: "은색 띠가 있는 핑크색 스탠리 텀블러" </li> <br> 2) 자연어 전처리 <br> <li>한국어 문장의 특성상 유사도 계산을 방해하는 불필요한 문장 성분을 제거하기 위해 **nltk와 konlpy를 활용**하여 텍스트를 토큰화하고 불용어를 제거했습니다. 또한 색상에 대한 영문 표현을 추가하였으며, 모델이 유사성을 판단하기 어려운 외국어 텍스트와 브랜드명에 대해서는 구글 번역 API를 사용해 한국어 정보를 보완하는 등 **전처리를 수행**했습니다. </li> <br> 3) 유사도 계산 <br><li> 사용자가 입력한 프롬프트와 데이터베이스에 저장된 분실물들의 특징 정보를 대상으로 **TF-IDF 모델**을 활용하여 유사도를 계산합니다. 이를 통해 상위 **3개의 유력한 분실물 게시물 ID를 매칭**하고, 프론트엔드에서 해당 게시물을 표시할 수 있도록 반환합니다.</li> <br><br> **[ 습득물 등록 ]** <br><br> 1) 습득물 이미지 업로드 <br><li> 이미지 업로드를 위해서 프론트엔드에서는 사용자가 선택한 이미지를 **File 타입으로 저장**한 후, **POST 요청**을 통해 서버로 전송합니다. </li> <br> 2) 물품의 특징 정보를 텍스트로 추출 <br><li> 서버는 전달받은 이미지를 ChatGpt 4-o 모델에 적용합니다. 모델은 사전에 정의한 프롬프트에 따라 이미지에서 로고, 색깔, 재질, 텍스트 등 **가시적인 물품의 특징 정보를 텍스트로 추출**합니다. </li> <br> 3) 사용자 입력 최적화 <br><li> 추출된 입력 정보를 프론트엔드에서 **GET 통신**으로 받아옵니다. 사용자는 자동으로 입력된 물건 이미지 정보를 확인할 수 있습니다. 더불어, 물건 분실 장소 또는 보관 장소는 단어의 일부만 입력해도 연관 장소를 추천하는 자동완성 기능을 통해 입력 과정을 최적화했습니다.</li>|
| (3) AI 설계, 구현 방법 | **[ 분실물 검색 유사도 처리 ]** <br><img width="360" alt="유사도코드1" src="https://github.com/user-attachments/assets/093099f7-1b82-4cde-9d42-6e7f09ac4825"><img width="430" alt="유사도코드2" src="https://github.com/user-attachments/assets/89d5b949-64ae-4684-826d-c1a1921eb10e"> <br><br> 1) 불필요한 문장 부호를 제거하고 동사 형용사의 경우 어간만 추출하기 위해 **konlpy의 Komoran 패키지**를 사용하여 토큰화를 진행했습니다. <br> 2) Word2vec, ko-bert, TF-IDF 등 다양한 **한국어 유사도 모델**을 시도하며, 유사한 물건을 얼마나 가려내는지 그리고 유사도 점수의 차이는 어떠한 지 등을 확인하며 최적의 모델을 탐색했습니다. 그 과정 속에서 영문명이나 외래어에서의 유사도를 잘 잡아내지 못함을 인식하였고, 이를 보완하기 위해 이들을 한글로 표현한 특징 정보를 추가하고, GPT 프롬프트에서도 답변의 경계를 설정하였습니다.<br><li> 예를 들어, 너무나 많은 색깔이 세상에 존재하기 때문에 대표적인 25가지의 색 내에서만 답변하도록 설정하였고, **해당 색상들의 영어식 표현 추가**하였습니다. (EX ; 빨강이면 레드 단어 추가)</li> 3) 또한, starbucks, odense 등 **영어 브랜드**가 물건 속 텍스트 추출 과정에서 존재했기에 구글 번역 API를 활용하여 스타벅스, 오덴세 등으로 추가했습니다. <br> 4) 이렇게 특징 정보를 구축한 후, 지도 교수님의 면담 과정에서 추천받은 **TF-IDF를 활용하여 유사도를 계산**하였고, 상위 3개의 분실물 정보를 서버에 넘기도록 했습니다. <br><br> **[ 습득물 등록 프롬프트 ]** <br><img width="362" alt="등록프롬프트" src="https://github.com/user-attachments/assets/0d8644a8-6f94-43ac-9b6a-cad284031ff8"> <br><br> 1) **프롬프트 엔지니어링**을 통해 AI가 특정 물건에 대해 정해진 범위 내에서 객관적이고 세부적으로 설명할 수 있도록 프롬프트 설정 물건 정보를 요약한 게시글 제목과 물건의 카테고리도 생성하여 효율적인 프로세스 설계. <br> 2) 카테고리나 색상 등은 많은 경우의 수가 있기 때문에 **교내 분실물 게시판의 분실물 데이터를 분석**하여, 일반적인 범위를 설정하였습니다. 또한, **신용카드, 증명사진, 서류 등 개인정보가 포함된 물품**은 별도의 카테고리를 설정하여, 나중에 게시글에서 물건 사진이 보이지 않게 처리하여, 혹시 모를 보안 문제를 방지했습니다.|
| (4) 진척도 및 검증내역 | <img width="864" alt="진척도" src="https://github.com/user-attachments/assets/6a3d3ad1-e124-4e33-b536-b99721de6067"> <br><br> 스타트 단계에서는 프로젝트에 사용될 핵심적인 **기술 2가지**를 검증했습니다. <br><br>우선 **이미지에서 정보가 잘 추출**되는지 멀티모달 언어 모델이 기반인 API 들의 검증을 진행했습니다.<br>실제 분실물 테스트 사진을 갖고 카테고리, 텍스트, 로고 그리고 색상을 잘 뽑아낼 수 있는지 **라바, 구글비전, 챗 지피티 3가지 기술**을 테스트해봤습니다. **Chat GPT를 선택한 이유**는 다음과 같습니다. 여러 객체가 담긴 이미지를 단일 객체로 스스로 Segmentation하여 각각 설명이 가능하고 맞춤형 프롬프트로 원하는 오더를 내릴 수 있고 유저가 사용할만한 키워드를 뽑아내기 수월하며 한국어 답변 quality가 다른 API에 비해 좋았습니다.<br><br>다음으로 **검색 결과 유사도 검증**입니다. ChatGPT 4o 결과를 바탕으로 사용자가 입력하는 prompt 예시와 유사도를 검증하기 위해 다양한 전처리 및 유사도 방법론을 시도했습니다. 한국어의 특성 상 조사, 어미, 접사 등 문장 비교 시에는 유의미한 역할을 하지 않는 요소가 존재합니다. 따라서, 스타트 동안 기본적인 유사도 모델 공부 및 데이터 처리 등을 진행하였습니다. <br><br>또한, 방학 동안에는 백엔드 파트에서는 DB 설계, API 명세서 작성, 피그마 구성 그리고 프론트엔드 파트에서는 기능 구현, 퍼블리싱을 수행했습니다. 이후 그로쓰 동안 API 통신 연결, AI-백엔드 연결, 클라우드 배포 그리고 사용자 테스트, 피드백 반영 등의 단계를 수행할 예정입니다. 따라서, 그로쓰 전체 일정에 비추어 봤을 때, 개별적인 기능 구현은 거의 마친 상태이므로 지금까지의 **진척도는 70% 정도**입니다. |

<br>
